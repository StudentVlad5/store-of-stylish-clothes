"use strict";(self.webpackChunkstore_of_stylish_clothes=self.webpackChunkstore_of_stylish_clothes||[]).push([[563],{4160:function(e,t,r){r.r(t),r.d(t,{default:function(){return T}});var n=r(2791),a=r(7689),s=r(4116),c=(r(5909),r(9434)),i=r(456),o=r(4942),l=r(1413),u=r(3433),g=r(4165),d=r(5861),f=r(9439),p=r(1087),m=r(9230),h=r(8835),x=r(8661),v=r(5943),y=r(4434),P=r(9816),Z=r(8917),j=r(8966),w=r(2877),A=r(8352),S=r(9474),_=r(5993),k=r(1481),b=r(8081),z=r(5785),L=r(3329),C=12,E=function(){var e,t=(0,p.lr)(),r=(0,f.Z)(t,2),a=r[0],s=r[1],c=(0,n.useState)({}),i=(0,f.Z)(c,2),E=i[0],T=i[1],I=(0,n.useState)([]),R=(0,f.Z)(I,2),Y=R[0],F=R[1],W=(0,n.useState)(!1),G=(0,f.Z)(W,2),N=G[0],O=G[1],Q=(0,n.useState)(null),q=(0,f.Z)(Q,2),B=q[0],D=q[1],H=(0,n.useState)(0),X=(0,f.Z)(H,2),$=X[0],M=X[1],J=(0,n.useState)((0,j.L2)("page")?(0,j.L2)("page"):1),K=(0,f.Z)(J,2),U=K[0],V=K[1],ee=(0,n.useContext)(z.X),te=ee.selectedLanguage,re=ee.selectedCurrency;e=(0,j.L2)("filters")?(0,j.L2)("filters"):{man_woman:[],category:[],maxPrice:"5000",minPrice:"0",product:[],sizes:[],page:U,perPage:C,currency:re};var ne=(0,n.useState)([]),ae=(0,f.Z)(ne,2),se=ae[0],ce=ae[1],ie=(0,n.useState)(e),oe=(0,f.Z)(ie,2),le=oe[0],ue=oe[1],ge=(0,n.useState)(""),de=(0,f.Z)(ge,2),fe=de[0],pe=de[1],me=(0,n.useState)((0,j.L2)("sort")?(0,j.L2)("sort"):""),he=(0,f.Z)(me,2),xe=he[0],ve=he[1],ye=(0,m.$G)().t,Pe=function(e){a.set("page",e),(0,j.RY)("page",e),V(e)},Ze=function(e){var t=(0,j.L2)("filters")[e];t&&t.forEach((function(e){var t=document.querySelectorAll('label[data-key="'.concat(e,'"]'));null===t||void 0===t||t.forEach((function(e){return e.classList.add("active_label")}))}))};(0,n.useEffect)((function(){var e=(0,j.L2)("filters"),t={};a.getAll("man_woman")&&"null"!=a.getAll("man_woman")&&void 0!==a.getAll("man_woman")&&""!==a.getAll("man_woman")?t.man_woman=a.get("man_woman"):e.man_woman?t.man_woman=e.man_woman:t.man_woman=[],a.getAll("category")&&"null"!=a.getAll("category")&&void 0!==a.getAll("category")&&""!==a.getAll("category")?t.category=a.get("category"):null!==e&&void 0!==e&&e.category?t.category=null===e||void 0===e?void 0:e.category:t.category=[],a.getAll("product")&&"null"!=a.getAll("product")&&void 0!==a.getAll("product")&&""!==a.getAll("product")?t.product=a.get("product"):null!==e&&void 0!==e&&e.product?t.product=null===e||void 0===e?void 0:e.product:t.product=[],a.getAll("sizes")&&"null"!=a.getAll("sizes")&&void 0!==a.getAll("sizes")&&""!==a.getAll("sizes")?t.sizes=a.get("sizes"):null!==e&&void 0!==e&&e.sizes?t.sizes=null===e||void 0===e?void 0:e.sizes:t.sizes=[],a.get("minPrice")?t.minPrice=a.get("minPrice"):null!==e&&void 0!==e&&e.minPrice?t.minPrice=null===e||void 0===e?void 0:e.minPrice:t.minPrice="",a.get("maxPrice")?t.maxPrice=a.get("maxPrice"):null!==e&&void 0!==e&&e.maxPrice?t.maxPrice=null===e||void 0===e?void 0:e.maxPrice:t.maxPrice="",a.get("page")?t.page=a.get("page"):(0,j.L2)("page")?t.page=(0,j.L2)("page"):t.page=U,a.get("perPage")?t.perPage=a.get("perPage"):t.perPage=C,a.get("currency")?t.currency=a.get("currency"):t.currency=re,a.get("sort")?t.sort=a.get("sort"):t.sort="",s(t)}),[]),(0,n.useEffect)((function(){function e(){return(e=(0,d.Z)((0,g.Z)().mark((function e(){var t,r;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,(0,Z.rQ)("/shop/".concat(te,"/discounts?").concat(a));case 4:if(t=e.sent,r=t.data){e.next=8;break}return e.abrupt("return",(0,A.NI)(ye("Whoops, something went wrong")));case 8:F(r.catalog),M(Math.ceil(r.total/C)),(r.total+C)/(C*U)<1&&Pe(1),Le(),Ze("man_woman"),Ze("category"),Ze("product"),Ze("sizes"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),D(e.t0);case 18:return e.prev=18,O(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})))).apply(this,arguments)}Ce(),a.size>0&&function(){e.apply(this,arguments)}()}),[ye,U,C,a,re,te]),(0,n.useEffect)((function(){!function(){var e=(0,d.Z)((0,g.Z)().mark((function e(){var t,r;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,(0,Z.rQ)("/category/".concat(te));case 4:if(t=e.sent,r=t.data){e.next=8;break}return e.abrupt("return",(0,A.NI)(ye("Whoops, something went wrong")));case 8:T(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),D(e.t0);case 14:return e.prev=14,O(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}()()}),[te]);var je=(0,n.useState)(!1),we=(0,f.Z)(je,2),Ae=we[0],Se=we[1],_e=(0,n.useState)(!1),ke=(0,f.Z)(_e,2),be=ke[0],ze=ke[1],Le=function(){var e=(0,j.L2)("filters");ce([].concat((0,u.Z)(e.category),(0,u.Z)(e.man_woman),(0,u.Z)(e.product),(0,u.Z)(e.sizes)))},Ce=function(){var e=Object.fromEntries(a);""!==le.man_woman&&(e.man_woman=le.man_woman),""!==le.category&&(e.category=le.category),""!==le.product&&(e.product=le.product),""!==le.sizes&&(e.sizes=le.sizes),""!==le.minPrice&&(e.minPrice=le.minPrice),""!==le.maxPrice&&(e.maxPrice=le.maxPrice),""!==le.page&&(e.page=U),""!==le.perPage&&(e.perPage=C),""!==le.currency&&(e.currency=re),""!==le.sort&&(e.sort=xe),s(e)};return console.log("searchParams",a.size),(0,L.jsxs)(S.uC,{children:[(0,L.jsxs)(S.Wt,{children:[(0,L.jsxs)(S.Q0,{children:[(0,L.jsx)(S.Cw,{$primary:!0,children:ye("Shop")}),(0,L.jsxs)(S.X6,{children:[(0,L.jsx)(S.Gg,{children:(0,L.jsxs)(S.A1,{children:[(0,L.jsxs)(S.fS,{onClick:function(){Se((function(e){return!e})),ze(!1)},children:[(0,L.jsx)("span",{children:ye("SORT BY")}),(0,L.jsx)(S.a5,{type:"button","aria-label":"switch to open sort list","aria-expanded":"false",children:(0,L.jsx)(_.r,{})})]}),Ae&&(0,L.jsx)(h.j,{sort:xe,setSort:ve})]})}),(0,L.jsxs)(S.l6,{children:[(0,L.jsxs)(S.fS,{onClick:function(){ze((function(e){return!e})),Se(!1)},children:[(0,L.jsx)("span",{children:ye("FILTER BY")}),(0,L.jsx)(S.a5,{type:"button","aria-label":"switch to open filter list","aria-expanded":"false",children:(0,L.jsx)(_.r,{})})]}),be&&(0,L.jsx)(S.kZ,{children:(0,L.jsx)(x.G,{filterState:E,setParams:Ce,filters:le,setFilters:ue,setSearchParams:s,searchParams:a})})]})]})]}),fe&&(0,L.jsxs)(S.sZ,{children:[(0,L.jsxs)("span",{children:[ye("Search results"),":"]})," ",fe,(0,L.jsx)(k.r,{"data-key":"search",onClick:function(){pe(""),a.delete("search")}})]}),(0,L.jsx)(S.tW,{children:se&&se.map((function(e,t){return(0,L.jsxs)("label",{"data-key":e,children:[(0,L.jsx)("span",{children:e}),(0,L.jsx)(k.r,{"data-key":e,onClick:function(e){return function(e){var t=e.currentTarget.dataset.key,r=se.filter((function(e){return e!==t}));ce(r);for(var n=(0,j.L2)("filters"),a=Object.entries(n),s=function(){var e=(0,f.Z)(i[c],2),r=[e[0],e[1]];if(0!==r[1].length){if(Array.isArray(r[1])){var a=r[1].findIndex((function(e){return e===t}));a>-1&&(r[1].splice(a,1),(0,j.RY)("filters",(0,l.Z)((0,l.Z)({},n),{},(0,o.Z)({},r[0],r[1]))),ue((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,o.Z)({},r[0],r[1]))})),Ce())}Array.isArray(r[1])||("minPrice"==r[0]&&((0,j.RY)("filters",(0,l.Z)((0,l.Z)({},n),{},(0,o.Z)({},"minPrice","0"))),ue((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,o.Z)({},"minPrice","0"))})),Ce()),"maxPrice"==r[0]&&((0,j.RY)("filters",(0,l.Z)((0,l.Z)({},n),{},(0,o.Z)({},"maxPrice","5000"))),ue((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,o.Z)({},"maxPrice","5000"))})),Ce()))}},c=0,i=a;c<i.length;c++)s();var u=document.querySelectorAll('label[data-key="'.concat(t,'"]'));null===u||void 0===u||u.forEach((function(e){return e.classList.remove("active_label")}))}(e)}})]},t)}))}),(0,L.jsxs)(S.T5,{onClick:function(){Se(!1),ze(!1)},children:[(0,L.jsx)(S.Px,{children:(0,L.jsx)(x.G,{filterState:E,setParams:Ce,filters:le,setFilters:ue,setSearchParams:s})}),(0,L.jsxs)(S.zc,{children:[N?(0,w.j)():(0,w.l)(),B&&(0,A.NI)(ye("Whoops, something went wrong")),Y.length>0&&!B&&(0,L.jsx)(y.O,{products:Y}),(0,L.jsx)(P.t,{totalPage:$,changePage:Pe,page:U}),0===Y.length&&!N&&!B&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(b.s0,{style:{textAlign:"center"},children:ye("Nothing found for these parameters...")}),(0,L.jsx)(b.s0,{style:{textAlign:"center"},children:ye("Please, try to clear filter")})]})]})]})]}),(0,L.jsx)(v.f,{})]})},T=function(){var e=(0,a.TH)(),t=(0,c.I0)();return window.scrollTo({top:0,left:0,behavior:"smooth"}),(0,n.useEffect)((function(){t((0,i.T)())}),[e]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(s.H,{title:"Discounts",description:"Discounts of goods"}),(0,L.jsx)(E,{})]})}}}]);
//# sourceMappingURL=563.7e4eeec5.chunk.js.map